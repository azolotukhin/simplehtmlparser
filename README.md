# simplehtmlparser

## Задача.

Большинство веб-страниц сейчас перегружено всевозможной рекламой… Наша задача «вытащить»
из веб-страницы только полезную информацию, отбросив весь «мусор» (навигацию, рекламу и тд).

## Описание алгоритма и запуск.

Основная полезная информация будет храниться в определенных тэгах. Имея урл, мы достаем контент страницы и просто ищем содержимое этих тэгов. Для разных сайтов набор таких тэгов разный (но схожий), поэтому для гибкой настройки в файле config.py описаны возможные настройки. Для парсинга используется стандартный питоновский HTMLParser, вспомогательные инструменты BeautifulSoup4 и python-requests. Возможно исполнение кода только с помощью python3.

Для использования в дирректории проекта в консоли вводим *python -m htmlparser page_url*<br/>
Пример: *python -m htmlparser http://lenta.ru/news/2016/02/05/sexual_kolne/*

## Настройки.
LINE_MAX_LENGTH - максимальная длина строки

ALLOWED_TEXT_TAGS - тэги, из которых будем брать текст. <br/>
Пример: Брать текст из h1 и p<br/>
ALLOWED_TEXT_TAGS = ['h1', 'p']

IGNORE_ATTRS - в тэгах с такими атрибутами мы искать не будем, формат [('название атрибута', 'значение атрибута'), ...].<br/> 
Пример: не брать текст из любых дочерних элементов тэга с id="menu" и тэга с id="navPath"<br/>
IGNORE_ATTRS = [('id', 'menu'), ('id', 'navPath')]<br/>

IGNORE_TAGS - в таких тэгах искать не надо. <br/>
Пример: не брать текст из любых дочерних элементов тэгов aside и header<br/>
IGNORE_TAGS = ['aside', 'header']<br/>

TAG_BEGIN_SYMBOLS - словарь для выделения нужных тэгов от начала строки.<br/> 
Пример: выделять заголовок h1 как ##<br/>
TAG_BEGIN_SYMBOLS = {'h1': '## '}<br/>

TAG_END_SYMBOLS - словарь для выделения нужных тэгов с конца строки.<br/> 
Пример: выделять заголовок h1 как ##<br/>
TAG_END_SYMBOLS = {'h1': ' ##'}<br/>

POSTFIX_ATTR - Если нужно достать информацию об атрибутах, то можно прописать здесь, будет прописываться в квадратных 
скобках после элемента.<br/>
В данной задаче используется для ссылок.

В файле config.py закомментированы настройки для нескольких новостных сайтов.

## Тестовые страницы
* http://lenta.ru/news/2016/02/05/sexual_kolne/
* http://www.gazeta.ru/politics/2016/02/06_a_8060903.shtml
* http://aidom.ru/hots/2016/start-prodazh-eksklyuzivnih-uchastkov-na-beregu-suhodolskogo-ozera.52.html
* http://www.aif.ru/politics/russia/glava_sevastopolya_ideya_o_dekommunizacii_kryma_-_politicheskaya_shizofreniya

Результаты тестов также содержатся в репозитории.

## Дальнейшее развитие
1. Разделение тэгов `<ol></ol>` и `<ul></ul>` , возможность нумерации пунктов.
2. Загрузка "важных" картинок со страницы в директорию файла. 
3. Написание тестов.
4. Поддержка python 2.7


